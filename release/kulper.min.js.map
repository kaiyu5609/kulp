{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/event-emitter/EventEmitter.js","src/index.js","src/request/Request.js","src/utils/Utils.js"],"names":["f","exports","module","define","amd","window","global","self","this","kulper","r","e","n","t","o","i","c","require","u","a","Error","code","p","call","length","1","indexOfListener","listeners","listener","EventEmitter","options","_classCallCheck","_events","name","response","key","events","_getEvents","RegExp","hasOwnProperty","test","l","flatListeners","push","getListeners","Array","isValidListener","_typeof","TypeError","getListenersAsObject","listenerIsWrapped","once","addListener","addOnceListener","names","defineEvent","index","splice","removeListener","remove","value","single","multiple","removeListeners","addListeners","manipulateListeners","type","removeEvent","args","listenersMap","slice","apply","_getOnceReturnValue","emitEvent","prototype","arguments","_onceReturnValue","Request","Utils","$","defaultDataFilter","data","settings","_settings","url","timeout","format","contentType","_convert","opts","defer","Deferred","ajaxSettings","indexOf","JSON","stringify","async","dataType","beforeSend","xhr","complete","textStatus","error","ajax","done","res","success","resolve","reject","fail","responseText","parse","errorCode","status","message","statusText","promise","get","post","put","delete","when","step","queue","next","shift","pipe","originElem","storeWidth","cssExpand","rdisplayswap","css","getWidthOrHeight","guid","Date","now","toString","measureText","canvas","document","createElement","width","height","label","font","context","getContext","getDOMOffset","visibility","display","elem","attr","nodeType","getComputedStyle","offsetWidth","offsetHeight","val","parseInt","augmentWidthOrHeight","getOffset","minHeight","callback","ret","old","style","swap","undefined","parentNode","nodeName","version"],"mappings":"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","file":"kulper.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","function indexOfListener(listeners, listener) {\n    var i = listeners.length;\n\n    while (i--) {\n        if (listeners[i].listener === listener) {\n            return i;\n        }\n    }\n\n    return -1;\n}\n\nfunction isValidListener(listener) {\n    if (typeof listener === 'function' || listener instanceof RegExp) {\n        return true;\n    } else if (listener && typeof listener === 'object') {\n        return isValidListener(listener.listener);\n    } else {\n        return false;\n    }\n}\n\nclass EventEmitter {\n    constructor(options) {\n\n    }\n\n    _getEvents() {\n        return this._events || (this._events = {});\n    }\n    /**\n     * @param {String|RegExp} name\n     * @return {Function[]|Object}\n     */\n    getListeners(name) {\n        var events = this._getEvents();\n        var response;\n        var key;\n\n        if (name instanceof RegExp) {\n            response = {};\n            for (key in events) {\n                if (events.hasOwnProperty(key) && name.test(key)) {\n                    response[key] = events[key];\n                }\n            }\n        } else {\n            response = events[name] || (events[name] = []);\n        }\n\n        return response;\n    }\n    /**\n     * @param {Object[]} listeners\n     * @return {Function[]}\n     */\n    flattenListeners(listeners) {\n        var flatListeners = [];\n        var i;\n        var l;\n\n        for (i = 0, l = listeners.length; i < l; i++) {\n            flatListeners.push(listeners[i].listener);\n        }\n\n        return flatListeners;\n    }\n    /**\n     * @param {String|RegExp} name\n     * @return {Object}\n     */\n    getListenersAsObject(name) {\n        var listeners = this.getListeners(name);\n        var response;\n\n        if (listeners instanceof Array) {\n            response = {};\n            response[name] = listeners;\n        }\n\n        return response || listeners;\n    }\n    /**\n     * @param {String|RegExp} name\n     * @param {Function} listener\n     * @return {Object}\n     */\n    addListener(name, listener) {\n        if (!isValidListener(listener)) {\n            throw new TypeError('listener must be a function');\n        }\n\n        var listeners = this.getListenersAsObject(name);\n        var listenerIsWrapped = typeof listener === 'object';\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key) && indexOfListener(listeners[key], listener) === -1) {\n                listeners[key].push(listenerIsWrapped ? listener : {\n                    listener: listener,\n                    once: false\n                });\n            }\n        }\n\n        return this;\n    }\n    /**\n     * @param {String|RegExp} name\n     * @param {Function} listener\n     * @return {Object}\n     */\n    on(name, listener) {\n        return this.addListener(name, listener);\n    }\n    /**\n     * @param {String|RegExp} name\n     * @param {Function} listener\n     * @return {Object}\n     */\n    addOnceListener(name, listener) {\n        return this.addListener(name, {\n            listener: listener,\n            once: true\n        });\n    }\n    /**\n     * @param {String|RegExp} name\n     * @param {Function} listener\n     * @return {Object}\n     */\n    once(name, listener) {\n        return this.addOnceListener(name, listener);\n    }\n    /**\n     * @param {String} name\n     * @return {Object}\n     */\n    defineEvent(name) {\n        this.getListeners(name);\n        return this;\n    }\n    /**\n     * @param {String[]} name\n     * @return {Object}\n     */\n    defineEvents(names) {\n        for (var i = 0, l = names.length; i < l; i++) {\n            this.defineEvent(name[i]);\n        }\n        return this;\n    }\n    /**\n     * @param {String|RegExp} name\n     * @param {Function} listener\n     * @return {Object}\n     */\n    removeListener(name, listener) {\n        var listeners = this.getListenersAsObject(name);\n        var index;\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key)) {\n                index = indexOfListener(listeners[key], listener);\n\n                if (index !== -1) {\n                    listeners[key].splice(index, 1);\n                }\n            }\n        }\n\n        return this;\n    }\n    /**\n     * @param {String|RegExp} name\n     * @param {Function} listener\n     * @return {Object}\n     */\n    off(name, listener) {\n        return this.removeListener(name, listener);\n    }\n    /**\n     * @param {Boolean} remove\n     * @param {String|Object|RegExp} name\n     * @param {Function[]} [listener]\n     * @return {Object}\n     */\n    manipulateListeners(remove, name, listeners) {\n        var i;\n        var value;\n        var single = remove ? this.removeListener : this.addListener;\n        var multiple = remove ? this.removeListeners : this.addListeners;\n\n        if (typeof name === 'object' && !(name instanceof RegExp)) {\n            for (i in name) {\n                if (name.hasOwnProperty(i) && (value = name[i])) {\n                    if (typeof value === 'function') {\n                        single.call(this, i, value);\n                    } else {\n                        multiple.call(this, i, value);\n                    }\n                }\n            }\n        } else {\n            i = listeners.length;\n            while (i--) {\n                single.call(this, name, listeners[i]);\n            }\n        }\n\n        return this;\n    }\n    /**\n     * @param {String|Object|RegExp} name\n     * @param {Function[]} [listener]\n     * @return {Object}\n     */\n    addListeners(name, listeners) {\n        return this.manipulateListeners(false, name, listeners);\n    }\n    /**\n     * @param {String|Object|RegExp} name\n     * @param {Function[]} [listener]\n     * @return {Object}\n     */\n    removeListeners(name, listeners) {\n        return this.manipulateListeners(true, name, listeners);\n    }\n    /**\n     * @param {String|RegExp} name\n     * @return {Object}\n     */\n    removeEvent(name) {\n        var type = typeof name;\n        var events = this._getEvents();\n        var key;\n\n        if (type === 'string') {\n            delete events[name];\n        } else if (name instanceof RegExp) {\n            for (key in events) {\n                if (events.hasOwnProperty(key) && name.test(key)) {\n                    delete events[key];\n                }\n            }\n        } else {\n            delete this._events;\n        }\n\n        return this;\n    }\n    /**\n     * @param {String|RegExp} name\n     * @return {Object}\n     */\n    removeAllListeners(name) {\n        return this.removeEvent(name);\n    }\n    /**\n     * @param {String|RegExp} name\n     * @param {Array} [args]\n     * @return {Object}\n     */\n    emitEvent(name, args) {\n        var listenersMap = this.getListenersAsObject(name);\n        var listeners;\n        var listener;\n        var i;\n        var l;\n        var key;\n        var response;\n\n        for (key in listenersMap) {\n            if (listenersMap.hasOwnProperty(key)) {\n                listeners = listenersMap[key].slice(0);\n\n                for (i = 0, l = listeners.length; i < l; i++) {\n                    listener = listeners[i];\n\n                    if (listener.once === true) {\n                        this.removeListener(name, listener.listener);\n                    }\n\n                    response = listener.listener.apply(this, args || []);\n\n                    if (response === this._getOnceReturnValue()) {\n                        this.removeListener(name, listener.listener);\n                    }\n                }\n            }\n        }\n\n        return this;\n    }\n    /**\n     * @param {String|RegExp} name\n     * @param {Array} [args]\n     * @return {Object}\n     */\n    trigger(name, args) {\n        return this.emitEvent(name, args);\n    }\n    /**\n     * @param {String|RegExp} name\n     * @param {...*}\n     * @return {Object}\n     */\n    fire(name) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        return this.emitEvent(name, args);\n    }\n    /**\n     * @param {*} value\n     * @return {Object}\n     */\n    setOnceReturnValue(value) {\n        this._onceReturnValue = value;\n        return this;\n    }\n    /**\n     * @return {*|Boolean}\n     */\n    _getOnceReturnValue() {\n        if (this.hasOwnProperty('_onceReturnValue')) {\n            return this._onceReturnValue;\n        } else {\n            return true;\n        }\n\n    }\n}\n\nmodule.exports = EventEmitter;","var EventEmitter = require('./event-emitter/EventEmitter');\nvar Request = require('./request/Request');\nvar Utils = require('./utils/Utils');\n\nmodule.exports = {\n    EventEmitter: EventEmitter,\n    Request: Request,\n    Utils: Utils\n};","const $ = require('jquery');\n\n// ajax对返回的原始数据进行预处理\nfunction defaultDataFilter(data, type) {\n    return data;\n}\n\nfunction transformData(contentType, data) {\n    if (contentType.indexOf('json') > -1) {\n        return JSON.stringify(data);\n    }\n    return data;\n}\n\nfunction Request(settings) {\n    var _settings = {\n        url: settings.url,\n        data: settings.data,\n        timeout: settings.timeout || 120000,\n        format: settings.format || defaultDataFilter,\n        contentType: settings.contentType || 'application/json'\n    };\n\n    return {\n        _convert: function(opts) {\n            var contentType = settings.contentType || 'application/json';\n            var defer = $.Deferred();\n            var ajaxSettings = {\n                url: _settings.url,\n                type: opts.type,\n                data: transformData(_settings.contentType, opts.data),\n                async: true,\n                // cache: true,\n                timeout: _settings.timeout,\n                // contentType: 'application/x-www-form-urlencoded',\n                contentType: _settings.contentType,\n                dataType: \"json\",\n                beforeSend: function(xhr) {},\n                complete: function(xhr, textStatus) {\n                    // 调用本次ajax请求时传递的options参数\n                },\n                error: function(xhr) {}\n            };\n\n            $.ajax(ajaxSettings)\n            .done(function(res) {\n                if (res.success === true) {\n                    defer.resolve(res);\n                } else {\n                    // Logger.error(res);\n                    defer.reject(res);\n                }\n            })\n            .fail(function(xhr) {\n                var response;\n                if (xhr.responseText) {\n                    try {\n                        response = JSON.parse(xhr.responseText);\n                    } catch (e) {\n                        response = { errorCode: xhr.status, data: null, message: xhr.responseText };\n                    }\n                } else {\n                    response = { errorCode: xhr.status, data: null, message: '系统处理错误，请稍候再试！'};\n                }\n\n                if (xhr.statusText === 'timeout' && xhr.status === 0) {\n                    response.message = '请求超时，请稍候再试！';\n                    defer.reject(response);\n                } else {\n                    defer.reject(response);\n                }\n            });\n\n            return defer.promise();\n        },\n        get: function() {\n            return this._convert({\n                type: 'GET'\n            });\n        },\n        post: function(data) {\n            return this._convert({\n                type: 'POST',\n                data: data || _settings.data\n            });\n        },\n        put: function(data) {\n            return this._convert({\n                type: 'PUT',\n                data: data || _settings.data\n            });\n        },\n        delete: function(data) {\n            return this._convert({\n                type: 'DELETE',\n                data: data || _settings.data\n            });\n        }\n\n    };\n\n}\n\nRequest.Deferred = function() {\n    return $.Deferred();\n};\n\nRequest.reject = function() {\n    var defer = $.Deferred();\n    defer.reject(arguments);\n    return defer;\n};\n\nRequest.when = function() {\n    return $.when.apply($, arguments);\n};\n\nRequest.step = function(queue) {\n    var defer = $.Deferred(),\n        p, next;\n\n    defer.resolve();\n\n    while (queue.length > 0 && (p = queue.shift())) {\n        next = next ? next.pipe(p) : defer.pipe(p);\n    }\n\n    return next;\n};\n\nmodule.exports = Request;","'use strict';\n\nvar version = \"0.0.1\";\n\n/**\n *不重复ID\n * @public\n * @method uid\n * @returns {String}\n */\nvar guid = (function () {\n    var u = Date.now();\n    return function () {\n        return (u++).toString(16);\n    };\n})();\n\n/**\n * Canvas文本\n * @public\n * @method measure\n * @param {String} label\n * @param {String} [font]\n * @returns {Object}\n */\nvar measureText = (function() {\n    try{\n        var canvas = document.createElement(\"canvas\");\n        canvas.width = 1;\n        canvas.height = 1;\n        return function (label, font) {\n            var context = canvas.getContext(\"2d\");\n            context.font = font || '12px Arial';\n            return context.measureText(label);\n        };\n    } catch(e) {\n        return function() {\n            return 0;\n        };\n    }\n})();\n\n\nvar getDOMOffset = (function() {\n    var options = { visibility: 'hidden', display: 'block' };\n    var cssExpand = ['Top', 'Right', 'Bottom', 'Left'];\n    var rdisplayswap = /^(none|table(?!-c[ea]).+)/;\n    var originElem, storeWidth, recursion = 0;\n\n    var css = function(elem, attr) {\n        if (elem && elem.nodeType === 1) {\n            return window.getComputedStyle(elem, null)[attr];\n        }\n    };\n\n    var augmentWidthOrHeight = function(elem, name) {\n        var i = name === 'width' ? 1 : 0, val = 0;\n        for ( ; i < 4; i += 2) {\n            val -= parseInt(css(elem, 'padding' + cssExpand[i]), 10);\n            val -= parseInt(css(elem, 'border' + cssExpand[i] + 'Width'), 10);\n        }\n        return val;\n    };\n\n    var getWidthOrHeight = function(elem, name) {\n        var val = (name === 'width') ?\n            (elem && elem.nodeType === 1 && elem.offsetWidth) :\n            (elem && elem.nodeType === 1 && elem.offsetHeight);\n        return (val + augmentWidthOrHeight(elem, name));\n    };\n\n    var swap = function(elem, options, callback) {\n        var ret, name, old ={};\n        for (name in options) {\n            old[name] = elem.style[name];\n            elem.style[name] = options[name];\n        }\n        ret = callback.call(elem);\n        for(name in options) {\n            elem.style[name] = old[name];\n        }\n        return ret;\n    };\n\n    var getOffset = function(elem, minHeight) {\n        var width, height;\n        if (!originElem) { originElem = elem; }\n\n        if (elem && elem.nodeType === 1 && (elem.offsetWidth === 0 && elem.offsetHeight === 0)) {\n            if (rdisplayswap.test(css(elem, 'display'))) {\n                return swap(elem, options, function() {\n                    width = getWidthOrHeight(originElem, 'width');\n                    height = getWidthOrHeight(originElem, 'height');\n\n                    if (!width) { return getOffset(elem.parentNode); }\n\n                    if (!height) {\n                        storeWidth = width;\n                        return getOffset(elem.parentNode);\n                    }\n\n                    originElem = undefined;\n                    return {\n                        width: width,\n                        height: height\n                    };\n                });\n            } else {\n                width = getWidthOrHeight(elem, 'width');\n                if (!storeWidth && width) {\n                    storeWidth = width;\n                }\n                return getOffset(elem.parentNode);\n            }\n        } else {\n            width = getWidthOrHeight(elem, 'width');\n            if (elem && elem.nodeName === 'BODY') {\n                height = minHeight || 300;\n            } else {\n                height = getWidthOrHeight(elem, 'height');\n                height = height >= 300 ? height : minHeight || 300;\n            }\n            if (storeWidth && storeWidth > 0) {\n                width = storeWidth;\n            }\n            originElem = storeWidth = undefined;\n            return {\n                width: width,\n                height: height\n            };\n        }\n    };\n\n    return getOffset;\n\n})();\n\n\nmodule.exports = {\n    version: version,\n    guid: guid,\n    measureText: measureText,\n    getDOMOffset: getDOMOffset\n};\n"]}