!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).kulper=e()}}(function(){return function o(u,s,f){function a(t,e){if(!s[t]){if(!u[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[t]={exports:{}};u[t][0].call(i.exports,function(e){return a(u[t][1][e]||e)},i,i.exports,o,u,s,f)}return s[t].exports}for(var c="function"==typeof require&&require,e=0;e<f.length;e++)a(f[e]);return a}({1:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function o(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,[{key:"_getEvents",value:function(){return this._events||(this._events={})}},{key:"getListeners",value:function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t}},{key:"flattenListeners",value:function(e){var t,n,r=[];for(t=0,n=e.length;t<n;t++)r.push(e[t].listener);return r}},{key:"getListenersAsObject",value:function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n}},{key:"addListener",value:function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!==(void 0===t?"undefined":s(t)))&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(e),i="object"===(void 0===t?"undefined":s(t));for(n in r)r.hasOwnProperty(n)&&-1===o(r[n],t)&&r[n].push(i?t:{listener:t,once:!1});return this}},{key:"on",value:function(e,t){return this.addListener(e,t)}},{key:"addOnceListener",value:function(e,t){return this.addListener(e,{listener:t,once:!0})}},{key:"once",value:function(e,t){return this.addOnceListener(e,t)}},{key:"defineEvent",value:function(e){return this.getListeners(e),this}},{key:"defineEvents",value:function(e){for(var t=0,n=e.length;t<n;t++)this.defineEvent(name[t]);return this}},{key:"removeListener",value:function(e,t){var n,r,i=this.getListenersAsObject(e);for(r in i)i.hasOwnProperty(r)&&-1!==(n=o(i[r],t))&&i[r].splice(n,1);return this}},{key:"off",value:function(e,t){return this.removeListener(e,t)}},{key:"manipulateListeners",value:function(e,t,n){var r,i,o=e?this.removeListener:this.addListener,u=e?this.removeListeners:this.addListeners;if("object"!==(void 0===t?"undefined":s(t))||t instanceof RegExp)for(r=n.length;r--;)o.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?o.call(this,r,i):u.call(this,r,i));return this}},{key:"addListeners",value:function(e,t){return this.manipulateListeners(!1,e,t)}},{key:"removeListeners",value:function(e,t){return this.manipulateListeners(!0,e,t)}},{key:"removeEvent",value:function(e){var t,n=void 0===e?"undefined":s(e),r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this}},{key:"removeAllListeners",value:function(e){return this.removeEvent(e)}},{key:"emitEvent",value:function(e,t){var n,r,i,o,u,s=this.getListenersAsObject(e);for(u in s)if(s.hasOwnProperty(u))for(i=0,o=(n=s[u].slice(0)).length;i<o;i++)!0===(r=n[i]).once&&this.removeListener(e,r.listener),r.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this}},{key:"trigger",value:function(e,t){return this.emitEvent(e,t)}},{key:"fire",value:function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)}},{key:"setOnceReturnValue",value:function(e){return this._onceReturnValue=e,this}},{key:"_getOnceReturnValue",value:function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue}}]),t}();t.exports=i},{}],2:[function(e,t,n){"use strict";var r=e("./event-emitter/EventEmitter"),i=e("./request/Request"),o=e("./utils/Utils");t.exports={EventEmitter:r,Request:i,Utils:o}},{"./event-emitter/EventEmitter":1,"./request/Request":3,"./utils/Utils":4}],3:[function(e,r,t){(function(e){"use strict";var s="undefined"!=typeof window?window.$:void 0!==e?e.$:null;function t(e,t){return e}function n(o){var u={url:o.url,data:o.data,timeout:o.timeout||12e4,format:o.format||t,contentType:o.contentType||"application/json"};return{_convert:function(e){o.contentType;var t,n,r=s.Deferred(),i={url:u.url,type:e.type,data:(t=u.contentType,n=e.data,-1<t.indexOf("json")?JSON.stringify(n):n),async:!0,timeout:u.timeout,contentType:u.contentType,dataType:"json",beforeSend:function(e){},complete:function(e,t){},error:function(e){}};return s.ajax(i).done(function(e){!0===e.success?r.resolve(e):r.reject(e)}).fail(function(t){var n;if(t.responseText)try{n=JSON.parse(t.responseText)}catch(e){n={errorCode:t.status,data:null,message:t.responseText}}else n={errorCode:t.status,data:null,message:"系统处理错误，请稍候再试！"};"timeout"===t.statusText&&0===t.status&&(n.message="请求超时，请稍候再试！"),r.reject(n)}),r.promise()},get:function(){return this._convert({type:"GET"})},post:function(e){return this._convert({type:"POST",data:e||u.data})},put:function(e){return this._convert({type:"PUT",data:e||u.data})},delete:function(e){return this._convert({type:"DELETE",data:e||u.data})}}}n.Deferred=function(){return s.Deferred()},n.reject=function(){var e=s.Deferred();return e.reject(arguments),e},n.when=function(){return s.when.apply(s,arguments)},n.step=function(e){var t,n,r=s.Deferred();for(r.resolve();0<e.length&&(t=e.shift());)n=n?n.pipe(t):r.pipe(t);return n},r.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,n){"use strict";var r,o,u,s,i,f,a,c,l=(r=Date.now(),function(){return(r++).toString(16)}),d=function(){try{var r=document.createElement("canvas");return r.width=1,r.height=1,function(e,t){var n=r.getContext("2d");return n.font=t||"12px Arial",n.measureText(e)}}catch(e){return function(){return 0}}}(),p=(s={visibility:"hidden",display:"block"},i=["Top","Right","Bottom","Left"],f=/^(none|table(?!-c[ea]).+)/,a=function(e,t){if(e&&1===e.nodeType)return window.getComputedStyle(e,null)[t]},c=function(e,t){return("width"===t?e&&1===e.nodeType&&e.offsetWidth:e&&1===e.nodeType&&e.offsetHeight)+function(e,t){for(var n="width"===t?1:0,r=0;n<4;n+=2)r-=parseInt(a(e,"padding"+i[n]),10),r-=parseInt(a(e,"border"+i[n]+"Width"),10);return r}(e,t)},function e(t,n){var r,i;return o||(o=t),t&&1===t.nodeType&&0===t.offsetWidth&&0===t.offsetHeight?f.test(a(t,"display"))?function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r}(t,s,function(){return r=c(o,"width"),i=c(o,"height"),r?i?(o=void 0,{width:r,height:i}):(u=r,e(t.parentNode)):e(t.parentNode)}):(r=c(t,"width"),!u&&r&&(u=r),e(t.parentNode)):(r=c(t,"width"),i=t&&"BODY"===t.nodeName?n||300:300<=(i=c(t,"height"))?i:n||300,u&&0<u&&(r=u),o=u=void 0,{width:r,height:i})});t.exports={version:"0.0.1",guid:l,measureText:d,getDOMOffset:p}},{}]},{},[2])(2)});
//# sourceMappingURL=kulper.min.js.map
